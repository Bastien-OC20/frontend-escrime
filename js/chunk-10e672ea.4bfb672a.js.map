{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./src/components/ArticleEdit.vue","webpack:///./src/components/ArticleEdit.vue?40f5","webpack:///./src/components/ArticleEdit.vue?58f4"],"names":["redefine","anObject","fails","flags","TO_STRING","RegExpPrototype","RegExp","prototype","nativeToString","NOT_GENERIC","call","source","INCORRECT_NAME","name","R","this","p","String","rf","f","undefined","unsafe","id","tabindex","aria-labelledby","aria-hidden","class","enctype","for","href","editorColor","editorTag","editArticleTitle","rows","placeholder","editArticleChapo","editArticle","src","newImage","onFileChange","type","ref","accept","updateArticle","data","editUserId","file","isSucces","methods","$refs","files","URL","createObjectURL","formData","FormData","set","toString","a","put","$route","params","headers","localStorage","getItem","then","res","status","fire","text","footer","icon","timer","showConfirmButton","timerProgressBar","willClose","router","push","catch","error","codeError","message","split","messageError","title","beforeMount","get","userId","console","log","userName","article","articleTitle","articleChapo","articleUrl","render"],"mappings":"kHACA,IAAIA,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAQ,EAAQ,QAChBC,EAAQ,EAAQ,QAEhBC,EAAY,WACZC,EAAkBC,OAAOC,UACzBC,EAAiBH,EAAgBD,GAEjCK,EAAcP,GAAM,WAAc,MAA2D,QAApDM,EAAeE,KAAK,CAAEC,OAAQ,IAAKR,MAAO,SAEnFS,EAAiBJ,EAAeK,MAAQT,GAIxCK,GAAeG,IACjBZ,EAASM,OAAOC,UAAWH,GAAW,WACpC,IAAIU,EAAIb,EAASc,MACbC,EAAIC,OAAOH,EAAEH,QACbO,EAAKJ,EAAEX,MACPgB,EAAIF,YAAcG,IAAPF,GAAoBJ,aAAaR,UAAY,UAAWD,GAAmBF,EAAMO,KAAKI,GAAKI,GAC1G,MAAO,IAAMF,EAAI,IAAMG,IACtB,CAAEE,QAAQ,K,8DCtBNC,GAAG,mBAAmBC,SAAS,KAAKC,kBAAgB,mBAAmBC,cAAY,QAAQC,MAAM,W,GAC7FA,MAAM,gB,GACFA,MAAM,iB,GACDC,QAAQ,uB,GACLD,MAAM,wF,EACP,yBAAiD,KAA9CA,MAAM,uBAAsB,kBAAc,G,GAG5CA,MAAM,kB,GACFA,MAAM,4C,EACP,yBAA0E,SAAnEE,IAAI,mBAAmBF,MAAM,WAAW,uBAAmB,G,GAGjEA,MAAM,4C,EACP,yBAA8E,SAAvEE,IAAI,mBAAmBF,MAAM,WAAU,4BAAwB,G,GAGrEA,MAAM,4C,EACP,yBAA0D,SAAnDE,IAAI,cAAcF,MAAM,WAAU,aAAS,G,GAGjDA,MAAM,6C,EAEP,yBAAiD,KAA9CA,MAAM,qBAAoB,oBAAgB,G,GAE5CA,MAAM,iC,GACFA,MAAM,qC,EACP,yBAAoE,SAA7DE,IAAI,OAAOF,MAAM,WAAU,8BAA0B,G,GAKnEA,MAAM,gB,GACFA,MAAM,0C,EACP,yBAA6F,OAAxFA,MAAM,SAAO,CAAC,yBAAoE,KAAjEG,KAAK,aAAaH,MAAM,+BAA8B,a,MACvEA,MAAM,S,wDAnCnC,yBAyCM,MAzCN,EAyCM,CAxCF,yBAuCM,MAvCN,EAuCM,CAtCF,yBAqCM,MArCN,EAqCM,CApCF,yBAmCO,OAnCP,EAmCO,CAlCH,yBAGM,MAHN,EAGM,CAFF,EACA,yBAAkE,KAA/DA,MAAK,CAAC,mBAA2B,EAAAI,c,6BAAe,EAAAC,WAAS,KAEhE,yBAuBM,MAvBN,EAuBM,CAtBF,yBAGM,MAHN,EAGM,CAFF,E,4BACA,yBAAyJ,YAA/IL,MAAM,e,qDAAwB,EAAAM,iBAAgB,IAAEV,GAAG,mBAAmBT,KAAK,eAAeoB,KAAK,IAAIC,YAAY,sB,4BAAjF,EAAAF,sBAE5C,yBAGM,MAHN,EAGM,CAFF,E,4BACA,yBAA8J,YAApJN,MAAM,e,qDAAwB,EAAAS,iBAAgB,IAAEb,GAAG,mBAAmBT,KAAK,eAAeoB,KAAK,IAAIC,YAAY,2B,4BAAjF,EAAAC,sBAE5C,yBAGM,MAHN,EAGM,CAFF,E,4BACA,yBAA6I,YAAnIT,MAAM,e,qDAAwB,EAAAU,YAAW,IAAEd,GAAG,cAAcT,KAAK,UAAUoB,KAAK,KAAKC,YAAY,wB,4BAAnE,EAAAE,iBAE5C,yBAGM,MAHN,EAGM,CAFF,yBAA0C,OAApCC,IAAK,EAAAC,SAAUZ,MAAM,gB,gBAC3B,IAEJ,yBAKM,MALN,EAKM,CAJF,yBAGM,MAHN,EAGM,CAFF,EACA,yBAAyI,SAAjI,SAAM,+BAAE,EAAAa,iBAAgBC,KAAK,OAAOC,IAAI,OAAO5B,KAAK,QAAQa,MAAM,oBAAoBJ,GAAG,OAAOoB,OAAO,2B,gBAI3H,yBAKM,MALN,EAKM,CAJF,yBAGM,MAHN,EAGM,CAFF,EACA,yBAAkI,MAAlI,EAAkI,CAA/G,yBAAyG,UAAjGF,KAAK,SAAU,QAAK,2DAAU,EAAAG,kBAAa,cAAIjB,MAAM,6BAA4B,yB,gIAezH,GACXb,KAAM,eACN+B,KAFW,WAGP,MAAO,CACHZ,iBAAkB,GAClBG,iBAAkB,GAClBC,YAAa,GACbS,WAAY,GACZP,SAAU,GACVP,UAAW,GACXD,YAAa,iBACbgB,KAAM,KACNC,UAAU,IAGlBC,QAAS,CACLT,aADK,WAEDxB,KAAK+B,KAAO/B,KAAKkC,MAAMH,KAAKI,MAAM,GAClCnC,KAAKuB,SAAWa,IAAIC,gBAAgBrC,KAAK+B,OAE7CH,cALK,WAKW,WACNU,EAAW,IAAIC,SACrBD,EAASE,IAAI,QAASxC,KAAK+B,MAC3BO,EAASE,IAAI,UAAWxC,KAAKqB,YAAYoB,YACzCH,EAASE,IAAI,eAAgBxC,KAAKiB,iBAAiBwB,YACnDH,EAASE,IAAI,eAAgBxC,KAAKoB,iBAAiBqB,YAEnD,EAAAC,EAAMC,IAAI,sCAAwC3C,KAAK4C,OAAOC,OAAOtC,GAAI+B,EAAU,CAAEQ,QAAS,CAAE,cAAgB,UAAYC,aAAaC,QAAQ,YAChJC,MAAK,SAAAC,GACiB,MAAfA,EAAIC,QACJ,IAAKC,KAAK,CACNC,KAAM,gCACNC,OAAQ,0BACRC,KAAM,UACNC,MAAO,IACPC,mBAAmB,EACnBC,kBAAkB,EAClBC,UAAW,WAAQ,EAAK5B,KAAO,KAAM6B,EAAA,KAAOC,KAAK,mBAI5DC,OAAM,SAASC,GACZ,IAAMC,EAAYD,EAAME,QAAQC,MAAM,SAAS,GAC3CC,EAAe,GACnB,OAAQH,GACJ,IAAK,MAAOG,EAAe,sCAAuC,MAClE,IAAK,MAAOA,EAAe,6BAA8B,MAE7D,IAAKf,KAAK,CACNgB,MAAO,0BACPf,KAAMc,GAAgBJ,EAAME,QAC5BV,KAAM,QACNC,MAAO,KACPC,mBAAmB,EACnBC,kBAAkB,SAKlCW,YA3DW,WA2DI,WACX,EAAA3B,EAAM4B,IAAI,sCAAwCtE,KAAK4C,OAAOC,OAAOtC,GAAI,CAAEuC,QAAS,CAAC,cAAiB,UAAYC,aAAaC,QAAQ,YACtIC,MAAK,SAAAC,GACF,EAAKpB,WAAaoB,EAAIrB,KAAK0C,OAC3BC,QAAQC,IAAIvB,GACR,EAAKpB,YAAciB,aAAaC,QAAQ,WACxC,EAAKhC,UAAY,mBAAqBkC,EAAIrB,KAAK6C,SAAW,KAC1D,EAAKrD,YAAc6B,EAAIrB,KAAK8C,QAC5B,EAAK1D,iBAAmBiC,EAAIrB,KAAK+C,aACjC,EAAKxD,iBAAmB8B,EAAIrB,KAAKgD,aACjC,EAAKtD,SAAW2B,EAAIrB,KAAKiD,YACe,QAAhC/B,aAAaC,QAAQ,SAC7B,EAAKhC,UAAY,sBAAwB+B,aAAaC,QAAQ,YAAc,KAC5E,EAAK3B,YAAc6B,EAAIrB,KAAK8C,QAC5B,EAAK1D,iBAAmBiC,EAAIrB,KAAK+C,aACjC,EAAKxD,iBAAmB8B,EAAIrB,KAAKgD,aACjC,EAAKtD,SAAW2B,EAAIrB,KAAKiD,WACzB,EAAK/D,YAAc,eAEnB,IAAKqC,KAAK,CACNgB,MAAO,0BACPf,KAAM,iDACNE,KAAM,QACNC,MAAO,KACPC,mBAAmB,EACnBC,kBAAkB,EAClBC,UAAW,WAAQC,EAAA,KAAOC,KAAK,mBAI1CC,OAAM,SAASC,GACZ,IAAMC,EAAYD,EAAME,QAAQC,MAAM,SAAS,GAC3CC,EAAe,GACnB,OAAQH,GACJ,IAAK,MAAOG,EAAe,sCAAuC,MAClE,IAAK,MAAOA,EAAe,6BAA8B,MACzD,IAAK,MAAOA,EAAe,4BAA6B,MAE5D,IAAKf,KAAK,CACNgB,MAAO,0BACPf,KAAMc,GAAgBJ,EAAME,QAC5BV,KAAM,QACNC,MAAO,KACPC,mBAAmB,EACnBC,kBAAkB,EAClBC,UAAW,WAAQC,EAAA,KAAOC,KAAK,qB,UCtJ/C,EAAOkB,OAASA,EAED,gB,2DCPf","file":"js/chunk-10e672ea.4bfb672a.js","sourcesContent":["'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","<template>\r\n    <div id=\"modalEditArticle\" tabindex=\"-1\" aria-labelledby=\"modalEditArticle\" aria-hidden=\"false\" class=\"artEdit\">\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <form enctype=\"multipart/form-data\">\r\n                    <div class=\"modal-header d-flex flex-column flex-md-row align-items-center justify-content-start\">\r\n                        <p class=\"modal-title h5 mr-1\">Editer article</p>\r\n                        <p class=\"modal-title mt-1\" :class=\"editorColor\">{{editorTag}}</p>\r\n                    </div>\r\n                    <div class=\"row modal-body\">\r\n                        <div class=\"col-12 justify-content-center form-group\">\r\n                            <label for=\"editArticleTitle\" class=\"sr-only\" >Titre de l'article:</label>\r\n                            <textarea class=\"form-control\" v-model=\"editArticleTitle\" id=\"editArticletitle\" name=\"articleTitle\" rows=\"2\" placeholder=\"Votre Titre ici...\"></textarea>\r\n                        </div>\r\n                        <div class=\"col-12 justify-content-center form-group\">\r\n                            <label for=\"editArticleChapo\" class=\"sr-only\">Sous-Titre de l'article:</label>\r\n                            <textarea class=\"form-control\" v-model=\"editArticleChapo\" id=\"editArticleChapo\" name=\"articleChapo\" rows=\"4\" placeholder=\"Votre sous-titre ici...\"></textarea>\r\n                        </div>\r\n                        <div class=\"col-12 justify-content-center form-group\">\r\n                            <label for=\"editArticle\" class=\"sr-only\">Article :</label>\r\n                            <textarea class=\"form-control\" v-model=\"editArticle\" id=\"editArticle\" name=\"article\" rows=\"10\" placeholder=\"Votre article ici...\"></textarea>\r\n                        </div>\r\n                        <div class=\"col-12 justify-content-center text-center\">\r\n                            <img :src=\"newImage\" class=\"w-50 rounded\">\r\n                            <p class=\"small text-center\">Image à partager</p>\r\n                        </div>\r\n                        <div class=\"col-12 justify-content-center\">\r\n                            <div class=\"form-group justify-content-center\">\r\n                                <label for=\"File\" class=\"sr-only\">Choisir une nouvelle photo</label>\r\n                                <input @change=\"onFileChange()\" type=\"file\" ref=\"file\" name=\"image\" class=\"form-control-file\" id=\"File\" accept=\".jpg, .jpeg, .gif, .png\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <div class=\"row w-100 justify-content-spacebetween\">\r\n                            <div class=\"col-6\"><a href=\"#/articles\" class=\"btn btn-secondary btn-block\">Annuler</a></div>\r\n                            <div class=\"col-6\"><button type=\"submit\" @click.prevent=\"updateArticle()\" class=\"btn btn-success btn-block\">Valider</button></div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\"\r\nimport router from \"../router\"\r\nimport Swal from \"sweetalert2\"\r\n\r\n\r\nexport default {\r\n    name: \"Article Edit\",\r\n    data() {\r\n        return {\r\n            editArticleTitle: \"\",\r\n            editArticleChapo: \"\",\r\n            editArticle: \"\",\r\n            editUserId: \"\",\r\n            newImage: \"\",\r\n            editorTag: \"\",\r\n            editorColor: \"text-secondary\",\r\n            file: null,\r\n            isSucces: false\r\n        }\r\n    },\r\n    methods: {\r\n        onFileChange() {\r\n            this.file = this.$refs.file.files[0];\r\n            this.newImage = URL.createObjectURL(this.file)\r\n        },\r\n        updateArticle() {\r\n            const formData = new FormData()\r\n            formData.set(\"image\", this.file);\r\n            formData.set(\"article\", this.editArticle.toString());\r\n            formData.set(\"articleTitle\", this.editArticleTitle.toString());\r\n            formData.set(\"articleChapo\", this.editArticleChapo.toString());\r\n            \r\n            axios.put(\"http://127.0.0.1:3000/api/articles/\" + this.$route.params.id, formData, { headers: { \"Authorization\":\"Bearer \" + localStorage.getItem(\"token\")}})\r\n            .then(res=> {\r\n                if (res.status === 200) {\r\n                    Swal.fire({\r\n                        text: \"L'article' à été mis à jour !\",\r\n                        footer: \"Redirection en cours...\",\r\n                        icon: \"success\",\r\n                        timer: 1000,\r\n                        showConfirmButton: false,\r\n                        timerProgressBar: true,\r\n                        willClose: () => { this.file = null; router.push(\"/articles\") }\r\n                    })\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n                const codeError = error.message.split(\"code \")[1]\r\n                let messageError = \"\"\r\n                switch (codeError){\r\n                    case \"400\": messageError = \"L'article' n'a pas été mis à jour !\"; break\r\n                    case \"401\": messageError = \"Requête non-authentifiée !\"; break\r\n                }\r\n                Swal.fire({\r\n                    title: \"Une erreur est survenue\",\r\n                    text: messageError || error.message,\r\n                    icon: \"error\",\r\n                    timer: 1500,\r\n                    showConfirmButton: false,\r\n                    timerProgressBar: true\r\n                })  \r\n            })\r\n        }\r\n    },\r\n    beforeMount () {\r\n        axios.get(\"http://127.0.0.1:3000/api/articles/\" + this.$route.params.id, { headers: {\"Authorization\": \"Bearer \" + localStorage.getItem(\"token\")} })\r\n        .then(res => {\r\n            this.editUserId = res.data.userId\r\n            console.log(res)\r\n            if (this.editUserId == localStorage.getItem(\"userId\"))  {\r\n                this.editorTag = \"( Utilisateur : \" + res.data.userName + \" )\"\r\n                this.editArticle = res.data.article\r\n                this.editArticleTitle = res.data.articleTitle\r\n                this.editArticleChapo = res.data.articleChapo\r\n                this.newImage = res.data.articleUrl\r\n            } else if ( localStorage.getItem(\"role\") == \"true\") {\r\n                this.editorTag = \"( Administrateur : \" + localStorage.getItem(\"userName\") + \" )\"\r\n                this.editArticle = res.data.article\r\n                this.editArticleTitle = res.data.articleTitle\r\n                this.editArticleChapo = res.data.articleChapo\r\n                this.newImage = res.data.articleUrl\r\n                this.editorColor = \"text-danger\"\r\n            } else {\r\n                Swal.fire({\r\n                    title: \"Une erreur est survenue\",\r\n                    text: \"Vous n'avez pas accès à cette fonctionnalité !\",\r\n                    icon: \"error\",\r\n                    timer: 1500,\r\n                    showConfirmButton: false,\r\n                    timerProgressBar: true,\r\n                    willClose: () => { router.push(\"/articles\") }\r\n                })  \r\n            }\r\n        })\r\n        .catch(function(error) {\r\n            const codeError = error.message.split(\"code \")[1]\r\n            let messageError = \"\"\r\n            switch (codeError){\r\n                case \"400\": messageError = \"L'article' n'a pas été mis à jour !\"; break\r\n                case \"401\": messageError = \"Requête non-authentifiée !\"; break\r\n                case \"404\": messageError = \"L'article' n'existe pas !\"; break\r\n            }\r\n            Swal.fire({\r\n                title: \"Une erreur est survenue\",\r\n                text: messageError || error.message,\r\n                icon: \"error\",\r\n                timer: 1500,\r\n                showConfirmButton: false,\r\n                timerProgressBar: true,\r\n                willClose: () => { router.push(\"/articles\") }\r\n            })  \r\n        })  \r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n   \r\n.artEdit{\r\n    padding-top: 15em;\r\n}\r\n\r\n\r\n</style>","import { render } from \"./ArticleEdit.vue?vue&type=template&id=04426471\"\nimport script from \"./ArticleEdit.vue?vue&type=script&lang=js\"\nexport * from \"./ArticleEdit.vue?vue&type=script&lang=js\"\n\nimport \"./ArticleEdit.vue?vue&type=style&index=0&id=04426471&lang=scss\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ArticleEdit.vue?vue&type=style&index=0&id=04426471&lang=scss\""],"sourceRoot":""}