{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./src/components/MessageEdit.vue","webpack:///./src/components/MessageEdit.vue?ce3f"],"names":["redefine","anObject","fails","flags","TO_STRING","RegExpPrototype","RegExp","prototype","nativeToString","NOT_GENERIC","call","source","INCORRECT_NAME","name","R","this","p","String","rf","f","undefined","unsafe","id","tabindex","aria-labelledby","aria-hidden","class","enctype","for","href","editorColor","editorTag","editMessage","rows","placeholder","src","newImage","onFileChange","type","ref","accept","updateMessage","data","editUserId","file","isSucces","methods","$refs","files","URL","createObjectURL","formData","FormData","set","toString","a","put","$route","params","headers","localStorage","getItem","then","res","status","fire","text","footer","icon","timer","showConfirmButton","timerProgressBar","willClose","router","push","catch","error","codeError","message","split","messageError","title","beforeMount","get","userId","console","log","userName","messageUrl","render"],"mappings":"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","file":"js/chunk-ffbd7ad0.99f02df1.js","sourcesContent":["'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","<template>\r\n    <div id=\"modalEditMessage\" tabindex=\"-1\" aria-labelledby=\"modalEditMessage\" aria-hidden=\"false\">\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <form enctype=\"multipart/form-data\">\r\n                    <div class=\"modal-header d-flex flex-column flex-md-row align-items-center justify-content-start\">\r\n                        <p class=\"modal-title h5 mr-1\">Editer message</p>\r\n                        <p class=\"modal-title mt-1\" :class=\"editorColor\">{{editorTag}}</p>\r\n                    </div>\r\n                    <div class=\"row modal-body\">\r\n                        <div class=\"col-12 justify-content-center form-group\">\r\n                            <label for=\"editMessage\" class=\"sr-only\">Message :</label>\r\n                            <textarea class=\"form-control\" v-model=\"editMessage\" id=\"editMessage\" name=\"message\" rows=\"10\" placeholder=\"Votre message ici...\"></textarea>\r\n                        </div>\r\n                        <div class=\"col-12 justify-content-center text-center\">\r\n                            <img :src=\"newImage\" class=\"w-50 rounded\">\r\n                            <p class=\"small text-center\">Image à partager</p>\r\n                        </div>\r\n                        <div class=\"col-12 justify-content-center\">\r\n                            <div class=\"form-group justify-content-center\">\r\n                                <label for=\"File\" class=\"sr-only\">Choisir une nouvelle photo</label>\r\n                                <input @change=\"onFileChange()\" type=\"file\" ref=\"file\" name=\"image\" class=\"form-control-file\" id=\"File\" accept=\".jpg, .jpeg, .gif, .png\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <div class=\"row w-100 justify-content-spacebetween\">\r\n                            <div class=\"col-6\"><a href=\"#/messages\" class=\"btn btn-secondary btn-block\">Annuler</a></div>\r\n                            <div class=\"col-6\"><button type=\"submit\" @click.prevent=\"updateMessage()\" class=\"btn btn-success btn-block\">Valider</button></div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\"\r\nimport router from \"../router\"\r\nimport Swal from \"sweetalert2\"\r\n\r\nexport default {\r\n    name: \"Message Edit\",\r\n    data() {\r\n        return {\r\n            editMessage: \"\",\r\n            editUserId: \"\",\r\n            newImage: \"\",\r\n            editorTag: \"\",\r\n            editorColor: \"text-secondary\",\r\n            file: null,\r\n            isSucces: false\r\n        }\r\n    },\r\n    methods: {\r\n        onFileChange() {\r\n            this.file = this.$refs.file.files[0];\r\n            this.newImage = URL.createObjectURL(this.file)\r\n        },\r\n        updateMessage() {\r\n            const formData = new FormData()\r\n            formData.set(\"image\", this.file)\r\n            formData.set(\"message\", this.editMessage.toString())\r\n            axios.put(\"http://127.0.0.1:3000/api/messages/\" + this.$route.params.id, formData, { headers: { \"Authorization\":\"Bearer \" + localStorage.getItem(\"token\")}})\r\n            .then(res=> {\r\n                if (res.status === 200) {\r\n                    Swal.fire({\r\n                        text: \"Le message à été mis à jour !\",\r\n                        footer: \"Redirection en cours...\",\r\n                        icon: \"success\",\r\n                        timer: 1000,\r\n                        showConfirmButton: false,\r\n                        timerProgressBar: true,\r\n                        willClose: () => { this.file = null; router.push(\"/messages\") }\r\n                    })\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n                const codeError = error.message.split(\"code \")[1]\r\n                let messageError = \"\"\r\n                switch (codeError){\r\n                    case \"400\": messageError = \"Le message n'a pas été mis à jour !\"; break\r\n                    case \"401\": messageError = \"Requête non-authentifiée !\"; break\r\n                }\r\n                Swal.fire({\r\n                    title: \"Une erreur est survenue\",\r\n                    text: messageError || error.message,\r\n                    icon: \"error\",\r\n                    timer: 1500,\r\n                    showConfirmButton: false,\r\n                    timerProgressBar: true\r\n                })  \r\n            })\r\n        }\r\n    },\r\n    beforeMount () {\r\n        axios.get(\"http://127.0.0.1:3000/api/messages/\" + this.$route.params.id, { headers: {\"Authorization\": \"Bearer \" + localStorage.getItem(\"token\")} })\r\n        .then(res => {\r\n            this.editUserId = res.data.userId\r\n            console.log(res)\r\n            if (this.editUserId == localStorage.getItem(\"userId\"))  {\r\n                this.editorTag = \"( Utilisateur : \" + res.data.userName + \" )\"\r\n                this.editMessage = res.data.message\r\n                this.newImage = res.data.messageUrl\r\n            } else if ( localStorage.getItem(\"role\") == \"true\") {\r\n                this.editorTag = \"( Administrateur : \" + localStorage.getItem(\"userName\") + \" )\"\r\n                this.editMessage = res.data.message\r\n                this.newImage = res.data.messageUrl\r\n                this.editorColor = \"text-danger\"\r\n            } else {\r\n                Swal.fire({\r\n                    title: \"Une erreur est survenue\",\r\n                    text: \"Vous n'avez pas accès à cette fonctionnalité !\",\r\n                    icon: \"error\",\r\n                    timer: 1500,\r\n                    showConfirmButton: false,\r\n                    timerProgressBar: true,\r\n                    willClose: () => { router.push(\"/messages\") }\r\n                })  \r\n            }\r\n        })\r\n        .catch(function(error) {\r\n            const codeError = error.message.split(\"code \")[1]\r\n            let messageError = \"\"\r\n            switch (codeError){\r\n                case \"400\": messageError = \"Le message n'a pas été mis à jour !\"; break\r\n                case \"401\": messageError = \"Requête non-authentifiée !\"; break\r\n                case \"404\": messageError = \"Le message n'existe pas !\"; break\r\n            }\r\n            Swal.fire({\r\n                title: \"Une erreur est survenue\",\r\n                text: messageError || error.message,\r\n                icon: \"error\",\r\n                timer: 1500,\r\n                showConfirmButton: false,\r\n                timerProgressBar: true,\r\n                willClose: () => { router.push(\"/messages\") }\r\n            })  \r\n        })  \r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./MessageEdit.vue?vue&type=template&id=10d6db26\"\nimport script from \"./MessageEdit.vue?vue&type=script&lang=js\"\nexport * from \"./MessageEdit.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}