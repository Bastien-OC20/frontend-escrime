(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77a6c2de"],{"04e9":function(e,t,c){"use strict";c("83c7")},"25f0":function(e,t,c){"use strict";var r=c("6eeb"),a=c("825a"),l=c("d039"),o=c("ad6d"),i="toString",n=RegExp.prototype,s=n[i],d=l((function(){return"/a/b"!=s.call({source:"a",flags:"b"})})),u=s.name!=i;(d||u)&&r(RegExp.prototype,i,(function(){var e=a(this),t=String(e.source),c=e.flags,r=String(void 0===c&&e instanceof RegExp&&!("flags"in n)?o.call(e):c);return"/"+t+"/"+r}),{unsafe:!0})},"6de4":function(e,t,c){"use strict";c.r(t);c("a15b"),c("fb6a"),c("ac1f"),c("1276");var r=c("7a23"),a={class:"container articles"},l={class:"row justify-content-center"},o={class:"col-12 col-md-10 col-lg-8",id:"allArticles"},i=Object(r["createVNode"])("a",{href:"","data-toggle":"modal","data-target":"#modalAddArticle",class:"my-2 btn btn-sm btn-block btn-success"},"Poster un article...",-1),n={class:"modal fade",id:"modalAddArticle",tabindex:"-1","aria-labelledby":"modalAddArticle","aria-hidden":"true"},s={class:"modal-dialog"},d={class:"modal-content"},u={enctype:"multipart/form-data"},b=Object(r["createVNode"])("div",{class:"modal-header"},[Object(r["createVNode"])("p",{class:"modal-title h5"},"Poster un nouvel article")],-1),m={class:"row modal-body"},p={class:"col-12 justify-content-center form-group"},f=Object(r["createVNode"])("label",{for:"newArticleTitle",class:"sr-only"},"Titre :",-1),j=Object(r["createVNode"])("label",{for:"newArticleChapo",class:"sr-only"},"Sous-titre :",-1),g=Object(r["createVNode"])("label",{for:"newArticle",class:"sr-only"},"Article :",-1),h={class:"col-12 justify-content-center text-center"},O=Object(r["createVNode"])("p",{class:"small text-center"},"Image à partager",-1),v={class:"col-12 justify-content-center"},w={class:"form-group justify-content-center"},V=Object(r["createVNode"])("label",{for:"File",class:"sr-only"},"Choisir une nouvelle photo",-1),N={class:"modal-footer"},A={class:"row w-100 justify-content-spacebetween"},y=Object(r["createVNode"])("div",{class:"col-6"},[Object(r["createVNode"])("a",{"data-dismiss":"modal",class:"btn btn-secondary btn-block"},"Annuler")],-1),k={class:"col-6"},x={class:"card-header bg-light d-flex align-items-center justify-content-between m-0 p-1"},B={class:"small text-dark m-0 p-1"},C={key:0,class:"small text-danger"},S={key:0},I=Object(r["createVNode"])("img",{src:"/images/edit.svg",class:"m-1 p-0",alt:"Editer l'article'",title:"Editer l'article'"},null,-1),T=Object(r["createVNode"])("img",{src:"/images/drop.svg",class:"m-1 p-0",alt:"Supprimer l'article'",title:"Supprimer l'article'"},null,-1),U={class:"card-body text-dark text-left"},D={key:0},R={key:1},F={key:2,class:"small"},E=Object(r["createVNode"])("div",{class:"card bg-danger"},[Object(r["createVNode"])("p",{class:"my-2 text-center text-white"}," Il n'y a pas d'articles plus ancien que celui au-dessus... ")],-1);function L(e,t,c,L,P,M){var q=this,z=Object(r["resolveComponent"])("NoArticle");return Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[Object(r["createVNode"])("div",l,[Object(r["createVNode"])("div",o,[i,Object(r["createVNode"])("div",n,[Object(r["createVNode"])("div",s,[Object(r["createVNode"])("div",d,[Object(r["createVNode"])("form",u,[b,Object(r["createVNode"])("div",m,[Object(r["createVNode"])("div",p,[f,Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return P.newArticleTitle=e}),id:"newArticleTitle",name:"articleTitle",rows:"2",placeholder:"Votre titre ici..."},null,512),[[r["vModelText"],P.newArticleTitle]]),j,Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(e){return P.newArticleChapo=e}),id:"newArticleChapo",name:"articleChapo",rows:"4",placeholder:"Votre sous-titre ici..."},null,512),[[r["vModelText"],P.newArticleChapo]]),g,Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=function(e){return P.newArticle=e}),id:"newArticle",name:"article",rows:"10",placeholder:"Votre article ici..."},null,512),[[r["vModelText"],P.newArticle]])]),Object(r["createVNode"])("div",h,[Object(r["createVNode"])("img",{src:P.newImage,class:"w-50 rounded"},null,8,["src"]),O]),Object(r["createVNode"])("div",v,[Object(r["createVNode"])("div",w,[V,Object(r["createVNode"])("input",{onChange:t[4]||(t[4]=function(e){return M.onFileChange()}),type:"file",ref:"file",name:"image",class:"form-control-file",id:"File",accept:".jpg, .jpeg, .gif, .png"},null,544)])])]),Object(r["createVNode"])("div",N,[Object(r["createVNode"])("div",A,[y,Object(r["createVNode"])("div",k,[Object(r["createVNode"])("button",{type:"submit",onClick:t[5]||(t[5]=Object(r["withModifiers"])((function(e){return M.addNewArticle()}),["prevent"])),class:"btn btn-success btn-block"}," Valider ")])])])])])])]),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(P.articles,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:e.id,class:"card bg-light my-3"},[Object(r["createVNode"])("div",x,[Object(r["createVNode"])("div",null,[Object(r["createVNode"])("img",{src:e.avatar,alt:"image de profil",height:"40",class:"m-0 rounded-circle"},null,8,["src"]),Object(r["createVNode"])("span",B,[Object(r["createTextVNode"])(" Posté par "+Object(r["toDisplayString"])(e.userName)+" ",1),e.isActive?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])("span",C,"(supprimé)")),Object(r["createTextVNode"])(", le "+Object(r["toDisplayString"])(e.createdAt.slice(0,10).split("-").reverse().join("/")+" à "+e.createdAt.slice(11,16)),1)])]),e.UserId==q.currentUserId||"true"==q.isAdmin?(Object(r["openBlock"])(),Object(r["createBlock"])("div",S,[Object(r["createVNode"])("a",{href:"#/article/edit/"+e.id},[I],8,["href"]),Object(r["createVNode"])("a",{href:"#/article/drop/"+e.id},[T],8,["href"])])):Object(r["createCommentVNode"])("",!0)]),Object(r["createVNode"])("div",U,[""!==e.articleTitle?(Object(r["openBlock"])(),Object(r["createBlock"])("h4",D,Object(r["toDisplayString"])(e.articleTitle),1)):Object(r["createCommentVNode"])("",!0),""!==e.articleChapo?(Object(r["openBlock"])(),Object(r["createBlock"])("p",R,[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.articleChapo),1)])):Object(r["createCommentVNode"])("",!0),""!==e.article?(Object(r["openBlock"])(),Object(r["createBlock"])("p",F,Object(r["toDisplayString"])(e.article),1)):Object(r["createCommentVNode"])("",!0),""!==e.articleUrl?(Object(r["openBlock"])(),Object(r["createBlock"])("img",{key:3,class:"w-100",src:e.articleUrl,alt:"image de l'article"},null,8,["src"])):Object(r["createCommentVNode"])("",!0)])])})),128)),P.noArticle?(Object(r["openBlock"])(),Object(r["createBlock"])(z,{key:0,class:"noArticle"})):Object(r["createCommentVNode"])("",!0),E])])])}c("d3b7"),c("25f0"),c("3ca3"),c("ddb0"),c("2b3d");var P={class:"card bg-light"},M=Object(r["createStaticVNode"])('<p class="h5 my-3 text-center" style="color:#091F43;">Bienvenu sur le réseau social interne</p><div class="card-header bg-light d-flex justify-content-center"><img src="/src/assets/back-arrow.svg" class="w-75 m-0 p-0" alt="logo groupomania"></div><div class="card-body d-flex flex-column flex-md-row justify-content-center align-items-center p-1 m-1"><div class="col-12 col-md-9 mt-3 mt-md-0 p-0 p-md"><p>Vous êtes la première personne à vous connecter, félicitations !</p><p>Il n&#39;y a aucun article à lire pour le moment...</p><p>À vous de commencer en postant le premier article !</p></div><div class="col-12 col-md-3 text-center"><img src="/images/edit.svg" width="100" height="100"></div></div>',3);function q(e,t,c,a,l,o){return Object(r["openBlock"])(),Object(r["createBlock"])("div",P,[M])}var z={Name:"No Article"};z.render=q;var J=z,$=c("bc3a"),G=c.n($),H=c("3d20"),K=c.n(H),Q={name:"Articles",components:{NoArticle:J},data:function(){return{noArticle:!1,isAdmin:!1,isActive:!0,newImage:"",currentUserId:"",newArticleTitle:"",newArticleChapo:"",newArticle:"",file:null,articles:[]}},methods:{onFileChange:function(){this.file=this.$refs.file.files[0],this.newImage=URL.createObjectURL(this.file)},addNewArticle:function(){var e=this,t=new FormData;t.set("image",this.file),t.set("UserId",this.currentUserId.toString()),t.set("articleTitle",this.newArticleTitle.toString()),t.set("articleChapo",this.newArticleChapo.toString()),t.set("article",this.newArticle.toString()),G.a.post("http://127.0.0.1:3000/api/articles/",t,{headers:{Authorization:" Bearer "+localStorage.getItem("token")}}).then((function(){e.UserId="",e.newArticleTitle="",e.newArticleChapo="",e.newArticle="",e.file=null,K.a.fire({text:"Article posté !",footer:"Redirection en cours...",icon:"success",timer:2e3,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){location.reload()}})})).catch((function(e){var t=e.message.split("code ")[1],c="";switch(t){case"400":c="L'article n'a pas été posté !";break;case"401":c="Requête non-authentifiée !";break}K.a.fire({title:"Une erreur est survenue",text:c||e.message,icon:"error",timer:3500,showConfirmButton:!1,timerProgressBar:!0})}))}},created:function(){var e=this;this.isAdmin=localStorage.getItem("role"),this.currentUserId=localStorage.getItem("userId"),null===localStorage.getItem("refresh")&&(localStorage.setItem("refresh",0),location.reload()),G.a.get("http://127.0.0.1:3000/api/articles",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){var c=t.data.ListeArticles;0===c.length?e.noArticle=!0:e.noArticle=!1,e.articles=c})).catch((function(e){var t=e.message.split("code ")[1],c="";switch(t){case"400":c="La liste des articles n'a pas été récupérer !";break}K.a.fire({title:"Une erreur est survenue",text:c||e.message,icon:"error",timer:3500,showConfirmButton:!1,timerProgressBar:!0})}))}};c("04e9");Q.render=L;t["default"]=Q},"83c7":function(e,t,c){},a15b:function(e,t,c){"use strict";var r=c("23e7"),a=c("44ad"),l=c("fc6a"),o=c("a640"),i=[].join,n=a!=Object,s=o("join",",");r({target:"Array",proto:!0,forced:n||!s},{join:function(e){return i.call(l(this),void 0===e?",":e)}})},a640:function(e,t,c){"use strict";var r=c("d039");e.exports=function(e,t){var c=[][e];return!!c&&r((function(){c.call(null,t||function(){throw 1},1)}))}},fb6a:function(e,t,c){"use strict";var r=c("23e7"),a=c("861d"),l=c("e8b5"),o=c("23cb"),i=c("50c4"),n=c("fc6a"),s=c("8418"),d=c("b622"),u=c("1dde"),b=c("ae40"),m=u("slice"),p=b("slice",{ACCESSORS:!0,0:0,1:2}),f=d("species"),j=[].slice,g=Math.max;r({target:"Array",proto:!0,forced:!m||!p},{slice:function(e,t){var c,r,d,u=n(this),b=i(u.length),m=o(e,b),p=o(void 0===t?b:t,b);if(l(u)&&(c=u.constructor,"function"!=typeof c||c!==Array&&!l(c.prototype)?a(c)&&(c=c[f],null===c&&(c=void 0)):c=void 0,c===Array||void 0===c))return j.call(u,m,p);for(r=new(void 0===c?Array:c)(g(p-m,0)),d=0;m<p;m++,d++)m in u&&s(r,d,u[m]);return r.length=d,r}})}}]);
//# sourceMappingURL=chunk-77a6c2de.03ba6d94.js.map