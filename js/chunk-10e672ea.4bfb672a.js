(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10e672ea"],{"25f0":function(e,t,r){"use strict";var i=r("6eeb"),a=r("825a"),c=r("d039"),o=r("ad6d"),l="toString",s=RegExp.prototype,n=s[l],d=c((function(){return"/a/b"!=n.call({source:"a",flags:"b"})})),u=n.name!=l;(d||u)&&i(RegExp.prototype,l,(function(){var e=a(this),t=String(e.source),r=e.flags,i=String(void 0===r&&e instanceof RegExp&&!("flags"in s)?o.call(e):r);return"/"+t+"/"+i}),{unsafe:!0})},"4c70":function(e,t,r){"use strict";r.r(t);var i=r("7a23"),a={id:"modalEditArticle",tabindex:"-1","aria-labelledby":"modalEditArticle","aria-hidden":"false",class:"artEdit"},c={class:"modal-dialog"},o={class:"modal-content"},l={enctype:"multipart/form-data"},s={class:"modal-header d-flex flex-column flex-md-row align-items-center justify-content-start"},n=Object(i["createVNode"])("p",{class:"modal-title h5 mr-1"},"Editer article",-1),d={class:"row modal-body"},u={class:"col-12 justify-content-center form-group"},f=Object(i["createVNode"])("label",{for:"editArticleTitle",class:"sr-only"},"Titre de l'article:",-1),m={class:"col-12 justify-content-center form-group"},b=Object(i["createVNode"])("label",{for:"editArticleChapo",class:"sr-only"},"Sous-Titre de l'article:",-1),p={class:"col-12 justify-content-center form-group"},h=Object(i["createVNode"])("label",{for:"editArticle",class:"sr-only"},"Article :",-1),g={class:"col-12 justify-content-center text-center"},j=Object(i["createVNode"])("p",{class:"small text-center"},"Image à partager",-1),O={class:"col-12 justify-content-center"},V={class:"form-group justify-content-center"},v=Object(i["createVNode"])("label",{for:"File",class:"sr-only"},"Choisir une nouvelle photo",-1),w={class:"modal-footer"},A={class:"row w-100 justify-content-spacebetween"},N=Object(i["createVNode"])("div",{class:"col-6"},[Object(i["createVNode"])("a",{href:"#/articles",class:"btn btn-secondary btn-block"},"Annuler")],-1),C={class:"col-6"};function x(e,t,r,x,y,T){return Object(i["openBlock"])(),Object(i["createBlock"])("div",a,[Object(i["createVNode"])("div",c,[Object(i["createVNode"])("div",o,[Object(i["createVNode"])("form",l,[Object(i["createVNode"])("div",s,[n,Object(i["createVNode"])("p",{class:["modal-title mt-1",y.editorColor]},Object(i["toDisplayString"])(y.editorTag),3)]),Object(i["createVNode"])("div",d,[Object(i["createVNode"])("div",u,[f,Object(i["withDirectives"])(Object(i["createVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return y.editArticleTitle=e}),id:"editArticletitle",name:"articleTitle",rows:"2",placeholder:"Votre Titre ici..."},null,512),[[i["vModelText"],y.editArticleTitle]])]),Object(i["createVNode"])("div",m,[b,Object(i["withDirectives"])(Object(i["createVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(e){return y.editArticleChapo=e}),id:"editArticleChapo",name:"articleChapo",rows:"4",placeholder:"Votre sous-titre ici..."},null,512),[[i["vModelText"],y.editArticleChapo]])]),Object(i["createVNode"])("div",p,[h,Object(i["withDirectives"])(Object(i["createVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=function(e){return y.editArticle=e}),id:"editArticle",name:"article",rows:"10",placeholder:"Votre article ici..."},null,512),[[i["vModelText"],y.editArticle]])]),Object(i["createVNode"])("div",g,[Object(i["createVNode"])("img",{src:y.newImage,class:"w-50 rounded"},null,8,["src"]),j]),Object(i["createVNode"])("div",O,[Object(i["createVNode"])("div",V,[v,Object(i["createVNode"])("input",{onChange:t[4]||(t[4]=function(e){return T.onFileChange()}),type:"file",ref:"file",name:"image",class:"form-control-file",id:"File",accept:".jpg, .jpeg, .gif, .png"},null,544)])])]),Object(i["createVNode"])("div",w,[Object(i["createVNode"])("div",A,[N,Object(i["createVNode"])("div",C,[Object(i["createVNode"])("button",{type:"submit",onClick:t[5]||(t[5]=Object(i["withModifiers"])((function(e){return T.updateArticle()}),["prevent"])),class:"btn btn-success btn-block"},"Valider")])])])])])])])}r("d3b7"),r("ac1f"),r("25f0"),r("3ca3"),r("1276"),r("ddb0"),r("2b3d");var y=r("bc3a"),T=r.n(y),I=r("a18c"),k=r("3d20"),S=r.n(k),U={name:"Article Edit",data:function(){return{editArticleTitle:"",editArticleChapo:"",editArticle:"",editUserId:"",newImage:"",editorTag:"",editorColor:"text-secondary",file:null,isSucces:!1}},methods:{onFileChange:function(){this.file=this.$refs.file.files[0],this.newImage=URL.createObjectURL(this.file)},updateArticle:function(){var e=this,t=new FormData;t.set("image",this.file),t.set("article",this.editArticle.toString()),t.set("articleTitle",this.editArticleTitle.toString()),t.set("articleChapo",this.editArticleChapo.toString()),T.a.put("http://127.0.0.1:3000/api/articles/"+this.$route.params.id,t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){200===t.status&&S.a.fire({text:"L'article' à été mis à jour !",footer:"Redirection en cours...",icon:"success",timer:1e3,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){e.file=null,I["a"].push("/articles")}})})).catch((function(e){var t=e.message.split("code ")[1],r="";switch(t){case"400":r="L'article' n'a pas été mis à jour !";break;case"401":r="Requête non-authentifiée !";break}S.a.fire({title:"Une erreur est survenue",text:r||e.message,icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0})}))}},beforeMount:function(){var e=this;T.a.get("http://127.0.0.1:3000/api/articles/"+this.$route.params.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.editUserId=t.data.userId,console.log(t),e.editUserId==localStorage.getItem("userId")?(e.editorTag="( Utilisateur : "+t.data.userName+" )",e.editArticle=t.data.article,e.editArticleTitle=t.data.articleTitle,e.editArticleChapo=t.data.articleChapo,e.newImage=t.data.articleUrl):"true"==localStorage.getItem("role")?(e.editorTag="( Administrateur : "+localStorage.getItem("userName")+" )",e.editArticle=t.data.article,e.editArticleTitle=t.data.articleTitle,e.editArticleChapo=t.data.articleChapo,e.newImage=t.data.articleUrl,e.editorColor="text-danger"):S.a.fire({title:"Une erreur est survenue",text:"Vous n'avez pas accès à cette fonctionnalité !",icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){I["a"].push("/articles")}})})).catch((function(e){var t=e.message.split("code ")[1],r="";switch(t){case"400":r="L'article' n'a pas été mis à jour !";break;case"401":r="Requête non-authentifiée !";break;case"404":r="L'article' n'existe pas !";break}S.a.fire({title:"Une erreur est survenue",text:r||e.message,icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){I["a"].push("/articles")}})}))}};r("c106");U.render=x;t["default"]=U},"68a9":function(e,t,r){},c106:function(e,t,r){"use strict";r("68a9")}}]);
//# sourceMappingURL=chunk-10e672ea.4bfb672a.js.map