(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ffbd7ad0"],{"25f0":function(e,t,a){"use strict";var s=a("6eeb"),r=a("825a"),o=a("d039"),i=a("ad6d"),c="toString",n=RegExp.prototype,l=n[c],d=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=c;(d||u)&&s(RegExp.prototype,c,(function(){var e=r(this),t=String(e.source),a=e.flags,s=String(void 0===a&&e instanceof RegExp&&!("flags"in n)?i.call(e):a);return"/"+t+"/"+s}),{unsafe:!0})},c58b:function(e,t,a){"use strict";a.r(t);var s=a("7a23"),r={id:"modalEditMessage",tabindex:"-1","aria-labelledby":"modalEditMessage","aria-hidden":"false"},o={class:"modal-dialog"},i={class:"modal-content"},c={enctype:"multipart/form-data"},n={class:"modal-header d-flex flex-column flex-md-row align-items-center justify-content-start"},l=Object(s["createVNode"])("p",{class:"modal-title h5 mr-1"},"Editer message",-1),d={class:"row modal-body"},u={class:"col-12 justify-content-center form-group"},g=Object(s["createVNode"])("label",{for:"editMessage",class:"sr-only"},"Message :",-1),m={class:"col-12 justify-content-center text-center"},f=Object(s["createVNode"])("p",{class:"small text-center"},"Image à partager",-1),b={class:"col-12 justify-content-center"},p={class:"form-group justify-content-center"},h=Object(s["createVNode"])("label",{for:"File",class:"sr-only"},"Choisir une nouvelle photo",-1),j={class:"modal-footer"},v={class:"row w-100 justify-content-spacebetween"},w=Object(s["createVNode"])("div",{class:"col-6"},[Object(s["createVNode"])("a",{href:"#/messages",class:"btn btn-secondary btn-block"},"Annuler")],-1),O={class:"col-6"};function V(e,t,a,V,N,x){return Object(s["openBlock"])(),Object(s["createBlock"])("div",r,[Object(s["createVNode"])("div",o,[Object(s["createVNode"])("div",i,[Object(s["createVNode"])("form",c,[Object(s["createVNode"])("div",n,[l,Object(s["createVNode"])("p",{class:["modal-title mt-1",N.editorColor]},Object(s["toDisplayString"])(N.editorTag),3)]),Object(s["createVNode"])("div",d,[Object(s["createVNode"])("div",u,[g,Object(s["withDirectives"])(Object(s["createVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return N.editMessage=e}),id:"editMessage",name:"message",rows:"10",placeholder:"Votre message ici..."},null,512),[[s["vModelText"],N.editMessage]])]),Object(s["createVNode"])("div",m,[Object(s["createVNode"])("img",{src:N.newImage,class:"w-50 rounded"},null,8,["src"]),f]),Object(s["createVNode"])("div",b,[Object(s["createVNode"])("div",p,[h,Object(s["createVNode"])("input",{onChange:t[2]||(t[2]=function(e){return x.onFileChange()}),type:"file",ref:"file",name:"image",class:"form-control-file",id:"File",accept:".jpg, .jpeg, .gif, .png"},null,544)])])]),Object(s["createVNode"])("div",j,[Object(s["createVNode"])("div",v,[w,Object(s["createVNode"])("div",O,[Object(s["createVNode"])("button",{type:"submit",onClick:t[3]||(t[3]=Object(s["withModifiers"])((function(e){return x.updateMessage()}),["prevent"])),class:"btn btn-success btn-block"},"Valider")])])])])])])])}a("d3b7"),a("ac1f"),a("25f0"),a("3ca3"),a("1276"),a("ddb0"),a("2b3d");var N=a("bc3a"),x=a.n(N),y=a("a18c"),M=a("3d20"),I=a.n(M),k={name:"Message Edit",data:function(){return{editMessage:"",editUserId:"",newImage:"",editorTag:"",editorColor:"text-secondary",file:null,isSucces:!1}},methods:{onFileChange:function(){this.file=this.$refs.file.files[0],this.newImage=URL.createObjectURL(this.file)},updateMessage:function(){var e=this,t=new FormData;t.set("image",this.file),t.set("message",this.editMessage.toString()),x.a.put("http://127.0.0.1:3000/api/messages/"+this.$route.params.id,t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){200===t.status&&I.a.fire({text:"Le message à été mis à jour !",footer:"Redirection en cours...",icon:"success",timer:1e3,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){e.file=null,y["a"].push("/messages")}})})).catch((function(e){var t=e.message.split("code ")[1],a="";switch(t){case"400":a="Le message n'a pas été mis à jour !";break;case"401":a="Requête non-authentifiée !";break}I.a.fire({title:"Une erreur est survenue",text:a||e.message,icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0})}))}},beforeMount:function(){var e=this;x.a.get("http://127.0.0.1:3000/api/messages/"+this.$route.params.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.editUserId=t.data.userId,console.log(t),e.editUserId==localStorage.getItem("userId")?(e.editorTag="( Utilisateur : "+t.data.userName+" )",e.editMessage=t.data.message,e.newImage=t.data.messageUrl):"true"==localStorage.getItem("role")?(e.editorTag="( Administrateur : "+localStorage.getItem("userName")+" )",e.editMessage=t.data.message,e.newImage=t.data.messageUrl,e.editorColor="text-danger"):I.a.fire({title:"Une erreur est survenue",text:"Vous n'avez pas accès à cette fonctionnalité !",icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){y["a"].push("/messages")}})})).catch((function(e){var t=e.message.split("code ")[1],a="";switch(t){case"400":a="Le message n'a pas été mis à jour !";break;case"401":a="Requête non-authentifiée !";break;case"404":a="Le message n'existe pas !";break}I.a.fire({title:"Une erreur est survenue",text:a||e.message,icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){y["a"].push("/messages")}})}))}};k.render=V;t["default"]=k}}]);
//# sourceMappingURL=chunk-ffbd7ad0.99f02df1.js.map