(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d92ebf4"],{"25f0":function(e,t,a){"use strict";var c=a("6eeb"),s=a("825a"),r=a("d039"),o=a("ad6d"),n="toString",l=RegExp.prototype,i=l[n],d=r((function(){return"/a/b"!=i.call({source:"a",flags:"b"})})),m=i.name!=n;(d||m)&&c(RegExp.prototype,n,(function(){var e=s(this),t=String(e.source),a=e.flags,c=String(void 0===a&&e instanceof RegExp&&!("flags"in l)?o.call(e):a);return"/"+t+"/"+c}),{unsafe:!0})},"284c":function(e,t,a){"use strict";a.r(t);a("a15b"),a("fb6a"),a("ac1f"),a("1276");var c=a("7a23"),s={class:"container messages"},r={class:"row justify-content-center"},o={class:"col-lg-8",id:"allMessages"},n=Object(c["createVNode"])("a",{href:"","data-toggle":"modal","data-target":"#modalAddMessage",class:"my-2 btn btn-sm btn-block btn-success"},"Poster un message...",-1),l={class:"modal fade",id:"modalAddMessage",tabindex:"-1","aria-labelledby":"modalAddMessage","aria-hidden":"true"},i={class:"modal-dialog"},d={class:"modal-content"},m={enctype:"multipart/form-data"},u=Object(c["createVNode"])("div",{class:"modal-header"},[Object(c["createVNode"])("p",{class:"modal-title h5"},"Poster un nouveau message")],-1),g={class:"row modal-body"},b={class:"col-12 justify-content-center form-group"},f=Object(c["createVNode"])("label",{for:"newMessage",class:"sr-only"},"Message :",-1),j={class:"col-12 justify-content-center text-center"},p=Object(c["createVNode"])("p",{class:"small text-center"},"Image à partager",-1),O={class:"col-12 justify-content-center"},v={class:"form-group justify-content-center"},h=Object(c["createVNode"])("label",{for:"File",class:"sr-only"},"Choisir une nouvelle photo",-1),N={class:"modal-footer"},V={class:"row w-100 justify-content-spacebetween"},y=Object(c["createVNode"])("div",{class:"col-6"},[Object(c["createVNode"])("a",{"data-dismiss":"modal",class:"btn btn-secondary btn-block"},"Annuler")],-1),w={class:"col-6"},k={class:"card-header bg-light d-flex align-items-center justify-content-between m-0 p-1"},x={class:"small text-dark m-0 p-1"},B={key:0,class:"small text-danger"},M={key:0},I=Object(c["createVNode"])("img",{src:"/images/edit.svg",class:"m-1 p-0",alt:"Editer le message",title:"Editer le message"},null,-1),A=Object(c["createVNode"])("img",{src:"/images/drop.svg",class:"m-1 p-0",alt:"Supprimer le message",title:"Supprimer le message"},null,-1),S={class:"card-body text-dark text-left"},C={key:0,class:"small"},U={class:"card-footer bg-light text-dark text-left m-0"},R=Object(c["createVNode"])("div",{class:"card bg-danger"},[Object(c["createVNode"])("p",{class:"my-2 text-center text-white"}," Il n'y a pas de messages plus ancien que celui au-dessus... ")],-1);function F(e,t,a,F,E,L){var P=this,D=Object(c["resolveComponent"])("NoMessage");return Object(c["openBlock"])(),Object(c["createBlock"])("div",null,[Object(c["createVNode"])("div",s,[Object(c["createVNode"])("div",r,[Object(c["createVNode"])("div",o,[n,Object(c["createVNode"])("div",l,[Object(c["createVNode"])("div",i,[Object(c["createVNode"])("div",d,[Object(c["createVNode"])("form",m,[u,Object(c["createVNode"])("div",g,[Object(c["createVNode"])("div",b,[f,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return E.newMessage=e}),id:"newMessage",name:"message",rows:"10",placeholder:"Votre message ici..."},null,512),[[c["vModelText"],E.newMessage]])]),Object(c["createVNode"])("div",j,[Object(c["createVNode"])("img",{src:E.newImage,class:"w-50 rounded"},null,8,["src"]),p]),Object(c["createVNode"])("div",O,[Object(c["createVNode"])("div",v,[h,Object(c["createVNode"])("input",{onChange:t[2]||(t[2]=function(e){return L.onFileChange()}),type:"file",ref:"file",name:"image",class:"form-control-file",id:"File",accept:".jpg, .jpeg, .gif, .png"},null,544)])])]),Object(c["createVNode"])("div",N,[Object(c["createVNode"])("div",V,[y,Object(c["createVNode"])("div",w,[Object(c["createVNode"])("button",{type:"submit",onClick:t[3]||(t[3]=Object(c["withModifiers"])((function(e){return L.addNewMessage()}),["prevent"])),class:"btn btn-success btn-block"}," Valider ")])])])])])])]),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(E.messages,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:e.id,class:"card bg-light my-3"},[Object(c["createVNode"])("div",k,[Object(c["createVNode"])("div",null,[Object(c["createVNode"])("img",{src:e.avatar,alt:"image de profil",height:"40",class:"m-0 rounded-circle"},null,8,["src"]),Object(c["createVNode"])("span",x,[Object(c["createTextVNode"])(" Posté par "+Object(c["toDisplayString"])(e.userName)+" ",1),e.isActive?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])("span",B,"(supprimé)")),Object(c["createTextVNode"])(", le "+Object(c["toDisplayString"])(e.createdAt.slice(0,10).split("-").reverse().join("/")+" à "+e.createdAt.slice(11,16)),1)])]),e.UserId==P.currentUserId||"true"==P.isAdmin?(Object(c["openBlock"])(),Object(c["createBlock"])("div",M,[Object(c["createVNode"])("a",{href:"#/message/edit/"+e.id},[I],8,["href"]),Object(c["createVNode"])("a",{href:"#/message/drop/"+e.id},[A],8,["href"])])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("div",S,[""!==e.message?(Object(c["openBlock"])(),Object(c["createBlock"])("p",C,Object(c["toDisplayString"])(e.message),1)):Object(c["createCommentVNode"])("",!0),""!==e.messageUrl?(Object(c["openBlock"])(),Object(c["createBlock"])("img",{key:1,class:"w-100",src:e.messageUrl,alt:"image du message"},null,8,["src"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("div",U,[Object(c["createVNode"])("a",{href:"#/commentaires/"+e.id,class:"h6 small"},"Voir les commentaires",8,["href"])])])})),128)),E.noMessage?(Object(c["openBlock"])(),Object(c["createBlock"])(D,{key:0})):Object(c["createCommentVNode"])("",!0),R])])])])}a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("2b3d");var E={class:"card bg-light"},L=Object(c["createVNode"])("p",{class:"h5 my-3 text-center",style:{color:"#091F43"}}," Bienvenu sur le réseau social interne ",-1),P={class:"card-header bg-light d-flex justify-content-center"},D=Object(c["createVNode"])("div",{class:"card-body d-flex flex-column flex-md-row justify-content-center align-items-center p-1 m-1"},[Object(c["createVNode"])("div",{class:"col-12 col-md-9 mt-3 mt-md-0 p-0 p-md"},[Object(c["createVNode"])("p",null,"Vous êtes la première personne à vous connecter, félicitations !"),Object(c["createVNode"])("p",null,"Il n'y a aucun message à lire pour le moment..."),Object(c["createVNode"])("p",null,"À vous de commencer en postant le premier message !")]),Object(c["createVNode"])("div",{class:"col-12 col-md-3 text-center"},[Object(c["createVNode"])("img",{src:"/images/edit.svg",width:"100",height:"100"})])],-1);function T(e,t,a,s,r,o){var n=Object(c["resolveComponent"])("NavBrand");return Object(c["openBlock"])(),Object(c["createBlock"])("div",E,[L,Object(c["createVNode"])("div",P,[Object(c["createVNode"])(n)]),D])}var q=a("1cd3"),z={Name:"No Message",components:{NavBrand:q["a"]}};z.render=T;var J=z,$=a("bc3a"),G=a.n($),H=a("3d20"),K=a.n(H),Q={name:"Messages",components:{NoMessage:J},data:function(){return{noMessage:!1,isAdmin:!1,isActive:!0,newImage:"",currentUserId:"",newMessage:"",file:null,messages:[]}},methods:{onFileChange:function(){this.file=this.$refs.file.files[0],this.newImage=URL.createObjectURL(this.file)},addNewMessage:function(){var e=this,t=new FormData;t.set("image",this.file),t.set("UserId",this.currentUserId.toString()),t.set("message",this.newMessage.toString()),G.a.post("http://127.0.0.1:3000/api/messages/",t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(){e.UserId="",e.newMessage="",e.file=null,K.a.fire({text:"Message posté !",footer:"Redirection en cours...",icon:"success",timer:2e3,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){location.reload()}})})).catch((function(e){var t=e.message.split("code ")[1],a="";switch(t){case"400":a="Le message n'a pas été posté !";break;case"401":a="Requête non-authentifiée !";break}K.a.fire({title:"Une erreur est survenue",text:a||e.message,icon:"error",timer:3500,showConfirmButton:!1,timerProgressBar:!0})}))}},created:function(){var e=this;this.isAdmin=localStorage.getItem("role"),this.currentUserId=localStorage.getItem("userId"),null===localStorage.getItem("refresh")&&(localStorage.setItem("refresh",0),location.reload()),G.a.get("http://127.0.0.1:3000/api/messages/",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){var a=t.data.ListeMessages;0===a.length?e.noMessage=!0:e.noMessage=!1,e.messages=a})).catch((function(e){var t=e.message.split("code ")[1],a="";switch(t){case"400":a="La liste des messages n'a pas été récupérer !";break}K.a.fire({title:"Une erreur est survenue",text:a||e.message,icon:"error",timer:3500,showConfirmButton:!1,timerProgressBar:!0})}))}};a("f18d");Q.render=F;t["default"]=Q},"98d8":function(e,t,a){},a15b:function(e,t,a){"use strict";var c=a("23e7"),s=a("44ad"),r=a("fc6a"),o=a("a640"),n=[].join,l=s!=Object,i=o("join",",");c({target:"Array",proto:!0,forced:l||!i},{join:function(e){return n.call(r(this),void 0===e?",":e)}})},a640:function(e,t,a){"use strict";var c=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&c((function(){a.call(null,t||function(){throw 1},1)}))}},f18d:function(e,t,a){"use strict";a("98d8")},fb6a:function(e,t,a){"use strict";var c=a("23e7"),s=a("861d"),r=a("e8b5"),o=a("23cb"),n=a("50c4"),l=a("fc6a"),i=a("8418"),d=a("b622"),m=a("1dde"),u=a("ae40"),g=m("slice"),b=u("slice",{ACCESSORS:!0,0:0,1:2}),f=d("species"),j=[].slice,p=Math.max;c({target:"Array",proto:!0,forced:!g||!b},{slice:function(e,t){var a,c,d,m=l(this),u=n(m.length),g=o(e,u),b=o(void 0===t?u:t,u);if(r(m)&&(a=m.constructor,"function"!=typeof a||a!==Array&&!r(a.prototype)?s(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return j.call(m,g,b);for(c=new(void 0===a?Array:a)(p(b-g,0)),d=0;g<b;g++,d++)g in m&&i(c,d,m[g]);return c.length=d,c}})}}]);
//# sourceMappingURL=chunk-5d92ebf4.0542452e.js.map