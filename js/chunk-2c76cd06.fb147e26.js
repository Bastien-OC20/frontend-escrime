(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c76cd06"],{"4abe":function(e,t,a){"use strict";a("bca4")},a15b:function(e,t,a){"use strict";var c=a("23e7"),o=a("44ad"),r=a("fc6a"),s=a("a640"),n=[].join,l=o!=Object,i=s("join",",");c({target:"Array",proto:!0,forced:l||!i},{join:function(e){return n.call(r(this),void 0===e?",":e)}})},a640:function(e,t,a){"use strict";var c=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&c((function(){a.call(null,t||function(){throw 1},1)}))}},bca4:function(e,t,a){},d94f:function(e,t,a){"use strict";a.r(t);var c=a("7a23"),o={class:"container compte"},r={class:"row justify-content-center"},s={class:"col-6 col-md-5 col-lg-3"},n=Object(c["createTextVNode"])("retour aux messages"),l={key:0,class:"col-6 col-md-5 col-lg-3"},i=Object(c["createTextVNode"])("retour aux articles"),d={class:"row justify-content-center"},u={class:"col-12 col-md-10 col-lg-8"},b={class:"card bg-light"},m={class:"card-header text-center",style:{"background-color":"ghostwhite"}},p={class:"text-dark h6"},f={class:"card-body bg-dark"},j={class:"row border d-flex align-items-center m-2 p-0",style:{"background-color":"ghostwhite"}},v={class:"col-12 col-md-4 text-center"},g=Object(c["createVNode"])("a",{href:"",class:"btn btn-sm btn-primary mb-2 p-1","data-toggle":"modal","data-target":"#modalAvatar"},"Changer de photo",-1),O={class:"modal fade",id:"modalAvatar",tabindex:"-1","aria-labelledby":"modalAvatar","aria-hidden":"true"},h={class:"modal-dialog"},N={class:"modal-content"},V=Object(c["createVNode"])("div",{class:"modal-header"},[Object(c["createVNode"])("p",{class:"modal-title h5"}," Changer la photo de profile ")],-1),y={class:"row modal-body"},k={class:"col-6 justify-content-center"},w=Object(c["createVNode"])("p",{class:"small text-center"},"Photo actuelle",-1),C={class:"col-6 justify-content-center"},x=Object(c["createVNode"])("p",{class:"small text-center"},"Nouvelle photo",-1),A={class:"col-12 justify-content-center"},B={class:"form-group justify-content-center"},S=Object(c["createVNode"])("label",{for:"File",class:"sr-only"},"Choisir une nouvelle photo",-1),D={class:"invalid-feedback"},I=Object(c["createStaticVNode"])('<div class="modal-footer"><div class="row w-100 justify-content-spacebetween"><div class="col-6"><a data-dismiss="modal" class="btn btn-sm btn-secondary btn-block">Annuler</a></div><div class="col-6"><button type="submit" class="btn btn-sm btn-success btn-block"> Valider </button></div></div></div>',1),R={class:"col-12 col-md-8 text-dark"},T={class:"small text-left m-0 p-1"},L={class:"small text-left m-0 p-1"},P={class:"small text-left m-0 p-1"},U=Object(c["createVNode"])("p",{class:"small text-left m-0 p-1"},"Votre contenu :",-1),F={key:0,class:"small text-left m-0 p-1"},q={href:"#/compte/articles"},z={key:0},M={class:"small text-left m-0 p-1"},_={href:"#/compte/messages"},E={key:0},J={class:"small text-left m-0 p-1"},$={key:0},G={class:"col-12 justify-content-center"},H=Object(c["createVNode"])("a",{href:"","data-toggle":"modal","data-target":"#modalDeleteAccount",class:"btn btn-sm btn-block btn-danger"},"Supprimer mon compte !",-1),K={class:"modal fade",id:"modalDeleteAccount","data-backdrop":"static","data-keyboard":"false",tabindex:"-1","aria-labelledby":"modalDeleteAccount","aria-hidden":"true"},Q={class:"modal-dialog modal-dialog-centered"},W={class:"modal-content border border-danger"},X={enctype:"multipart/form-data"},Y=Object(c["createStaticVNode"])('<div class="modal-header"><p class="modal-title h5 text-danger"> Supprimer mon compte ? </p></div><div class="row modal-body"><div class="col-12 justify-content-center form-group"><p class="text-danger"><span class="h6">ATTENTION !</span> Cette action est irreversible. </p><p> Vous ne pourrais plus vous connecter avec cette adresse email mais vos messages et commentaires seront toujours visible par les autres utilisateurs. </p><p> Êtes-vous <span class="font-weight-bold">certain</span> de vouloir supprimer votre compte ? </p></div></div>',2),Z={class:"modal-footer"},ee={class:"row w-100 justify-content-spacebetween"},te=Object(c["createVNode"])("div",{class:"col-6"},[Object(c["createVNode"])("a",{"data-dismiss":"modal",class:"btn btn-secondary btn-block"},"Annuler")],-1),ae={class:"col-6"},ce=Object(c["createVNode"])("div",{class:"card-footer bg-light"},null,-1);function oe(e,t,a,oe,re,se){var ne=Object(c["resolveComponent"])("router-link");return Object(c["openBlock"])(),Object(c["createBlock"])("div",o,[Object(c["createVNode"])("div",r,[Object(c["createVNode"])("div",s,[Object(c["createVNode"])(ne,{to:"/messages",class:"my-3 btn btn-sm btn-block btn-success"},{default:Object(c["withCtx"])((function(){return[n]})),_:1})]),"true"==this.isAdmin?(Object(c["openBlock"])(),Object(c["createBlock"])("div",l,[Object(c["createVNode"])(ne,{to:"/articles",class:"my-3 btn btn-sm btn-block btn-info"},{default:Object(c["withCtx"])((function(){return[i]})),_:1})])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("div",d,[Object(c["createVNode"])("div",u,[Object(c["createVNode"])("div",b,[Object(c["createVNode"])("div",m,[Object(c["createVNode"])("span",p,Object(c["toDisplayString"])(re.userName),1)]),Object(c["createVNode"])("div",f,[Object(c["createVNode"])("div",j,[Object(c["createVNode"])("div",v,[Object(c["createVNode"])("img",{src:re.avatar,class:"rounded-circle m-1 p-0",height:"128"},null,8,["src"]),g]),Object(c["createVNode"])("div",O,[Object(c["createVNode"])("div",h,[Object(c["createVNode"])("div",N,[Object(c["createVNode"])("form",{onSubmit:t[2]||(t[2]=Object(c["withModifiers"])((function(e){return se.updateAvatar()}),["prevent"])),enctype:"multipart/form-data"},[V,Object(c["createVNode"])("div",y,[Object(c["createVNode"])("div",k,[Object(c["createVNode"])("img",{src:re.avatar,class:"w-100 rounded-circle"},null,8,["src"]),w]),Object(c["createVNode"])("div",C,[Object(c["createVNode"])("img",{src:re.newAvatar,class:"w-100 rounded-circle"},null,8,["src"]),x]),Object(c["createVNode"])("div",A,[Object(c["createVNode"])("div",B,[S,Object(c["createVNode"])("input",{onChange:t[1]||(t[1]=function(e){return se.onFileChange()}),type:"file",ref:"file",name:"image",class:["form-control-file",{"is-invalid":re.submitted&&!re.file}],id:"File",accept:".jpg, .jpeg, .gif, .png"},null,34),Object(c["withDirectives"])(Object(c["createVNode"])("div",D," Une nouvelle photo est requise ! ",512),[[c["vShow"],re.submitted&&!re.file]])])])]),I],32)])])]),Object(c["createVNode"])("div",R,[Object(c["createVNode"])("p",T," Adresse e-mail : "+Object(c["toDisplayString"])(re.email),1),Object(c["createVNode"])("p",L,"Rôle : "+Object(c["toDisplayString"])(re.role),1),Object(c["createVNode"])("p",P," Crée le : "+Object(c["toDisplayString"])(re.createdAt),1),U,Object(c["createVNode"])("ul",null,["true"===this.isAdmin?(Object(c["openBlock"])(),Object(c["createBlock"])("li",F,[Object(c["createVNode"])("a",q,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(re.articlesCount)+" article",1),re.articlesCount>1?(Object(c["openBlock"])(),Object(c["createBlock"])("span",z,"s")):Object(c["createCommentVNode"])("",!0)])])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("li",M,[Object(c["createVNode"])("a",_,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(re.messagesCount)+" message",1),re.messagesCount>1?(Object(c["openBlock"])(),Object(c["createBlock"])("span",E,"s")):Object(c["createCommentVNode"])("",!0)])]),Object(c["createVNode"])("li",J,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(re.commentsCount)+" commentaire",1),re.commentsCount>1?(Object(c["openBlock"])(),Object(c["createBlock"])("span",$,"s")):Object(c["createCommentVNode"])("",!0)])])]),Object(c["createVNode"])("div",G,[H,Object(c["createVNode"])("div",K,[Object(c["createVNode"])("div",Q,[Object(c["createVNode"])("div",W,[Object(c["createVNode"])("form",X,[Y,Object(c["createVNode"])("div",Z,[Object(c["createVNode"])("div",ee,[te,Object(c["createVNode"])("div",ae,[Object(c["createVNode"])("button",{type:"submit",onClick:t[3]||(t[3]=Object(c["withModifiers"])((function(e){return se.deleteAccount()}),["prevent"])),class:"btn btn-danger btn-block"}," Valider ")])])])])])])])])])]),ce])])])])}a("a15b"),a("fb6a"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),a("2b3d");var re=a("bc3a"),se=a.n(re),ne=a("3d20"),le=a.n(ne),ie={name:"Compte",components:{},data:function(){return{users:"",userName:"",email:"",role:"",createdAt:"",articlesCount:"",messagesCount:"",commentsCount:"",avatar:"",newAvatar:"/images/avatars/default_user.jpg",file:null,submitted:!1}},methods:{onFileChange:function(){this.file=this.$refs.file.files[0],this.newAvatar=URL.createObjectURL(this.file)},updateAvatar:function(){this.submitted=!0;var e=new FormData;e.append("image",this.file),se.a.put("http://127.0.0.1:3000/api/users/"+localStorage.getItem("userId"),e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){localStorage.setItem("avatar",e.data.avatar),le.a.fire({text:"La photo de profil à été mise à jour !",footer:"Redirection en cours...",icon:"success",timer:1e3,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){location.reload()}})})).catch((function(e){var t=e.message.split("code ")[1],a="";switch(t){case"400":a="La photo de profil n'a pas été mise à jour !";break;case"401":a="Requête non-authentifiée !";break}le.a.fire({title:"Une erreur est survenue",text:a||e.message,icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0})}))},deleteAccount:function(){se.a.put("http://127.0.0.1:3000/api/users/"+localStorage.getItem("userId"),{isActive:!1},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(){localStorage.clear(),le.a.fire({text:"Le compte à été supprimé !",footer:"Déconnexion en cours...",icon:"success",timer:5e3,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){location.reload()}})})).catch((function(e){var t=e.message.split("code ")[1],a="";switch(t){case"400":a="La photo de profil n'a pas été mise à jour !";break;case"401":a="Requête non-authentifiée !";break}le.a.fire({title:"Une erreur est survenue",text:a||e.message,icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0})}))}},created:function(){var e=this;this.isAdmin=localStorage.getItem("role"),se.a.get("http://127.0.0.1:3000/api/users/"+localStorage.getItem("userId"),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.userName=t.data.userName,e.email=t.data.email,e.role=t.data.role,e.createdAt=t.data.createdAt.slice(0,10).split("-").reverse().join("/")+" à "+t.data.createdAt.slice(11,16),e.articlesCount=t.data.articlesCount,e.messagesCount=t.data.messagesCount,e.commentsCount=t.data.commentsCount,e.avatar=t.data.avatar})).catch((function(e){var t=e.message.split("code ")[1],a="";switch(t){case"400":a="Vos informations non pas été récuperées !";break;case"401":a="Requête non-authentifiée !";break}le.a.fire({title:"Une erreur est survenue",text:a||e.message,icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0})}))}};a("4abe");ie.render=oe;t["default"]=ie},fb6a:function(e,t,a){"use strict";var c=a("23e7"),o=a("861d"),r=a("e8b5"),s=a("23cb"),n=a("50c4"),l=a("fc6a"),i=a("8418"),d=a("b622"),u=a("1dde"),b=a("ae40"),m=u("slice"),p=b("slice",{ACCESSORS:!0,0:0,1:2}),f=d("species"),j=[].slice,v=Math.max;c({target:"Array",proto:!0,forced:!m||!p},{slice:function(e,t){var a,c,d,u=l(this),b=n(u.length),m=s(e,b),p=s(void 0===t?b:t,b);if(r(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!r(a.prototype)?o(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return j.call(u,m,p);for(c=new(void 0===a?Array:a)(v(p-m,0)),d=0;m<p;m++,d++)m in u&&i(c,d,u[m]);return c.length=d,c}})}}]);
//# sourceMappingURL=chunk-2c76cd06.fb147e26.js.map